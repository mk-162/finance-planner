// UK Broker Platform Data
// Source: Monevator broker comparison, December 2024

export type FeeType = 'flat' | 'percentage' | 'trading';
export type AccountType = 'isa' | 'sipp' | 'trading' | 'lisa' | 'jisa';
export type InvestmentType = 'funds' | 'etfs' | 'shares' | 'mixed';

export interface FeeTier {
    start: number;
    end: number;
    rate: number;
}

export interface BrokerPlatform {
    id: string;
    name: string;
    feeType: FeeType;
    annualFeeBase: number;          // Flat fee amount or 0
    annualFeeNotes: string;
    feeTiers: FeeTier[];            // For percentage-based fees
    feeCap: number | null;          // Max fee cap, null if none
    tradingFeeFunds: number;
    tradingFeeETFs: number;
    tradingFeeShares: number;
    regularInvestingFee: number;
    fxFeeRate: number;
    fxFeeNotes: string;
    accounts: AccountType[];
    goodFor: string;
    restrictions: string;
    entryFee: number;
    exitFee: number;
}

export const BROKER_PLATFORMS: BrokerPlatform[] = [
    {
        id: 'investengine',
        name: 'InvestEngine',
        feeType: 'flat',
        annualFeeBase: 0,
        annualFeeNotes: 'ETFs only - DIY service',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0,
        fxFeeNotes: 'Fixed times only',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Zero fees - ETF portfolios',
        restrictions: 'ETFs only',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'prosper',
        name: 'Prosper',
        feeType: 'flat',
        annualFeeBase: 0,
        annualFeeNotes: 'Restricted funds list with 0% OCFs on some',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Zero fees - Fund portfolios',
        restrictions: 'Restricted fund list',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'lightyear',
        name: 'Lightyear',
        feeType: 'flat',
        annualFeeBase: 0,
        annualFeeNotes: '',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 1,
        regularInvestingFee: 0,
        fxFeeRate: 0.0035,
        fxFeeNotes: '',
        accounts: ['isa', 'trading'],
        goodFor: 'ETF portfolios',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'freetrade-basic',
        name: 'Freetrade Basic',
        feeType: 'flat',
        annualFeeBase: 0,
        annualFeeNotes: '',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0.0099,
        fxFeeNotes: '',
        accounts: ['isa', 'trading'],
        goodFor: 'ETF portfolios - Basic users',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'freetrade-standard',
        name: 'Freetrade Standard',
        feeType: 'flat',
        annualFeeBase: 59.88,
        annualFeeNotes: 'Includes funds and gilts',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0.0059,
        fxFeeNotes: '',
        accounts: ['isa', 'trading'],
        goodFor: 'ETF portfolios - Standard users',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'freetrade-plus',
        name: 'Freetrade Plus',
        feeType: 'flat',
        annualFeeBase: 119.99,
        annualFeeNotes: 'Includes SIPP access',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0.0039,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'ETF portfolios - Premium users',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'ii-investor',
        name: 'Interactive Investor',
        feeType: 'flat',
        annualFeeBase: 143.88,
        annualFeeNotes: 'Includes 1 free trade/month + ISA/Trading. +£120 for SIPP',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 3.99,
        tradingFeeETFs: 3.99,
        tradingFeeShares: 3.99,
        regularInvestingFee: 0,
        fxFeeRate: 0.015,
        fxFeeNotes: 'Up to £25k trade then cheaper tiers',
        accounts: ['isa', 'sipp', 'trading', 'jisa'],
        goodFor: 'Large portfolios / Drawdown',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'ii-essentials',
        name: 'II Essentials',
        feeType: 'flat',
        annualFeeBase: 59.88,
        annualFeeNotes: 'If ISA + Trading under £50k',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 3.99,
        tradingFeeETFs: 3.99,
        tradingFeeShares: 3.99,
        regularInvestingFee: 0,
        fxFeeRate: 0.015,
        fxFeeNotes: 'Up to £25k trade then cheaper tiers',
        accounts: ['isa', 'trading', 'jisa'],
        goodFor: 'Smaller portfolios under £50k',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'lloyds',
        name: 'Lloyds Share Dealing',
        feeType: 'flat',
        annualFeeBase: 40,
        annualFeeNotes: 'Single fee for ISA + Trading',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 1.50,
        tradingFeeETFs: 11,
        tradingFeeShares: 11,
        regularInvestingFee: 0,
        fxFeeRate: 0.01,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Direct fee fund portfolios',
        restrictions: 'Free for ages 18-25',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'halifax',
        name: 'Halifax',
        feeType: 'flat',
        annualFeeBase: 36,
        annualFeeNotes: 'Single fee for ISA + Trading',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 9.50,
        tradingFeeETFs: 9.50,
        tradingFeeShares: 9.50,
        regularInvestingFee: 0,
        fxFeeRate: 0.0125,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Budget platform',
        restrictions: 'Free for ages 18-25',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'scottish-widows',
        name: 'Scottish Widows',
        feeType: 'flat',
        annualFeeBase: 0,
        annualFeeNotes: 'Previously iWeb - grandfathered',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 5,
        tradingFeeETFs: 5,
        tradingFeeShares: 5,
        regularInvestingFee: 0,
        fxFeeRate: 0.015,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Direct fee ETF/fund portfolios',
        restrictions: 'SIPP unavailable to new customers',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'trading212',
        name: 'Trading 212',
        feeType: 'trading',
        annualFeeBase: 0,
        annualFeeNotes: 'Securities lending scheme',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0.0015,
        fxFeeNotes: '',
        accounts: ['isa', 'trading'],
        goodFor: 'Zero fees - ETF portfolios',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'dodl',
        name: 'Dodl by AJ Bell',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Min £12 per account',
        feeTiers: [{ start: 0, end: 999999, rate: 0.0015 }],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0.0075,
        fxFeeNotes: 'Up to £10k trade then cheaper. 0.5% dividends',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Simple investing',
        restrictions: 'Restricted fund/ETF list',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'vanguard',
        name: 'Vanguard',
        feeType: 'percentage',
        annualFeeBase: 48,
        annualFeeNotes: '£48 up to £32k. Tiered on sum of all accounts',
        feeTiers: [
            { start: 0, end: 32000, rate: 0 },
            { start: 32000, end: 250000, rate: 0.0015 },
            { start: 250000, end: 999999, rate: 0 },
        ],
        feeCap: 375,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading', 'jisa'],
        goodFor: 'Vanguard funds only',
        restrictions: 'Vanguard funds/ETFs only',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'aj-bell',
        name: 'AJ Bell',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account. 0.25% on ETFs/shares/ITs/bonds',
        feeTiers: [
            { start: 0, end: 250000, rate: 0.0025 },
            { start: 250000, end: 500000, rate: 0.001 },
            { start: 500000, end: 999999, rate: 0 },
        ],
        feeCap: 42,
        tradingFeeFunds: 1.50,
        tradingFeeETFs: 5,
        tradingFeeShares: 5,
        regularInvestingFee: 1.50,
        fxFeeRate: 0.0075,
        fxFeeNotes: 'Up to £10k then cheaper. 0.5% dividends',
        accounts: ['isa', 'trading', 'lisa', 'jisa'],
        goodFor: 'Flexible portfolios',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'aj-bell-sipp',
        name: 'AJ Bell SIPP',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account. 0.25% on ETFs/shares/ITs/bonds',
        feeTiers: [
            { start: 0, end: 250000, rate: 0.0025 },
            { start: 250000, end: 500000, rate: 0.001 },
            { start: 500000, end: 999999, rate: 0 },
        ],
        feeCap: 120,
        tradingFeeFunds: 1.50,
        tradingFeeETFs: 5,
        tradingFeeShares: 5,
        regularInvestingFee: 1.50,
        fxFeeRate: 0.0075,
        fxFeeNotes: 'Up to £10k then cheaper. 0.5% dividends',
        accounts: ['sipp'],
        goodFor: 'Decumulation ETF portfolio',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'fidelity',
        name: 'Fidelity',
        feeType: 'percentage',
        annualFeeBase: 90,
        annualFeeNotes: '£90 up to £25k. Charged on sum of all accounts',
        feeTiers: [
            { start: 0, end: 25000, rate: 0 },
            { start: 25000, end: 250000, rate: 0.0035 },
            { start: 250000, end: 1000000, rate: 0.002 },
        ],
        feeCap: 90,
        tradingFeeFunds: 0,
        tradingFeeETFs: 7.50,
        tradingFeeShares: 7.50,
        regularInvestingFee: 1.50,
        fxFeeRate: 0.0075,
        fxFeeNotes: 'Up to £10k then cheaper',
        accounts: ['isa', 'trading', 'jisa'],
        goodFor: 'Comprehensive service',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'fidelity-sipp',
        name: 'Fidelity SIPP',
        feeType: 'percentage',
        annualFeeBase: 90,
        annualFeeNotes: '£90 up to £25k. Charged on sum of all accounts',
        feeTiers: [
            { start: 0, end: 25000, rate: 0 },
            { start: 25000, end: 250000, rate: 0.0035 },
            { start: 250000, end: 1000000, rate: 0.002 },
        ],
        feeCap: 90,
        tradingFeeFunds: 0,
        tradingFeeETFs: 7.50,
        tradingFeeShares: 7.50,
        regularInvestingFee: 1.50,
        fxFeeRate: 0.0075,
        fxFeeNotes: 'Up to £10k then cheaper',
        accounts: ['sipp'],
        goodFor: 'Decumulation ETF portfolio',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'barclays',
        name: 'Barclays Smart Investor',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered',
        feeTiers: [
            { start: 0, end: 200000, rate: 0.0025 },
            { start: 200000, end: 999999, rate: 0.0005 },
        ],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 6,
        tradingFeeShares: 6,
        regularInvestingFee: 0,
        fxFeeRate: 0.01,
        fxFeeNotes: 'Up to £5k then cheaper',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Barclays customers',
        restrictions: '',
        entryFee: 0,
        exitFee: 90,
    },
    {
        id: 'santander',
        name: 'Santander Investment Hub',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account',
        feeTiers: [
            { start: 0, end: 50000, rate: 0.0035 },
            { start: 50000, end: 500000, rate: 0.002 },
            { start: 500000, end: 999999, rate: 0.001 },
        ],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 0,
        tradingFeeShares: 0,
        regularInvestingFee: 0,
        fxFeeRate: 0,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Fund investors',
        restrictions: 'Funds only',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'aviva',
        name: 'Aviva',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered on sum of all accounts',
        feeTiers: [
            { start: 0, end: 500000, rate: 0.0035 },
            { start: 500000, end: 999999, rate: 0 },
        ],
        feeCap: null,
        tradingFeeFunds: 4.99,
        tradingFeeETFs: 4.99,
        tradingFeeShares: 4.99,
        regularInvestingFee: 0,
        fxFeeRate: 0,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading'],
        goodFor: 'Aviva customers',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'bestinvest',
        name: 'Bestinvest',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account',
        feeTiers: [
            { start: 0, end: 250000, rate: 0.004 },
            { start: 250000, end: 500000, rate: 0.002 },
            { start: 500000, end: 1000000, rate: 0.001 },
        ],
        feeCap: null,
        tradingFeeFunds: 0,
        tradingFeeETFs: 4.95,
        tradingFeeShares: 4.95,
        regularInvestingFee: 0,
        fxFeeRate: 0.0095,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading', 'jisa'],
        goodFor: 'Fund focus',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'hl',
        name: 'Hargreaves Lansdown',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account. Fee cap on ETFs/shares/ITs/bonds',
        feeTiers: [
            { start: 0, end: 250000, rate: 0.0045 },
            { start: 250000, end: 1000000, rate: 0.0025 },
            { start: 1000000, end: 2000000, rate: 0.001 },
        ],
        feeCap: 45,
        tradingFeeFunds: 0,
        tradingFeeETFs: 11.95,
        tradingFeeShares: 11.95,
        regularInvestingFee: 0,
        fxFeeRate: 0.01,
        fxFeeNotes: 'Up to £5k then cheaper. 1% dividends',
        accounts: ['isa', 'sipp', 'trading', 'lisa', 'jisa'],
        goodFor: 'Customer service',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'hl-sipp',
        name: 'HL SIPP',
        feeType: 'percentage',
        annualFeeBase: 0,
        annualFeeNotes: 'Tiered per account',
        feeTiers: [
            { start: 0, end: 250000, rate: 0.0045 },
            { start: 250000, end: 1000000, rate: 0.0025 },
            { start: 1000000, end: 2000000, rate: 0.001 },
        ],
        feeCap: 200,
        tradingFeeFunds: 0,
        tradingFeeETFs: 11.95,
        tradingFeeShares: 11.95,
        regularInvestingFee: 0,
        fxFeeRate: 0.01,
        fxFeeNotes: 'Up to £5k then cheaper. 1% dividends',
        accounts: ['sipp', 'jisa'],
        goodFor: 'Premium SIPP service',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
    {
        id: 'charles-stanley',
        name: 'Charles Stanley Direct',
        feeType: 'percentage',
        annualFeeBase: 60,
        annualFeeNotes: '£60 up to £20k. Max £600. 50 free trades/6mo',
        feeTiers: [
            { start: 0, end: 20000, rate: 0 },
            { start: 20000, end: 200000, rate: 0.003 },
            { start: 200000, end: 999999, rate: 0 },
        ],
        feeCap: 600,
        tradingFeeFunds: 4,
        tradingFeeETFs: 10,
        tradingFeeShares: 10,
        regularInvestingFee: 0,
        fxFeeRate: 0.01,
        fxFeeNotes: 'Up to £10k then cheaper',
        accounts: ['isa', 'trading', 'jisa'],
        goodFor: 'Active traders',
        restrictions: '',
        entryFee: 0,
        exitFee: 10,
    },
    {
        id: 'interactive-brokers',
        name: 'Interactive Brokers',
        feeType: 'trading',
        annualFeeBase: 0,
        annualFeeNotes: '£3 monthly inactivity fee if less than 3 trades',
        feeTiers: [],
        feeCap: null,
        tradingFeeFunds: 3,
        tradingFeeETFs: 3,
        tradingFeeShares: 3,
        regularInvestingFee: 0,
        fxFeeRate: 0.0003,
        fxFeeNotes: '',
        accounts: ['isa', 'sipp', 'trading', 'jisa'],
        goodFor: 'International shares',
        restrictions: '',
        entryFee: 0,
        exitFee: 0,
    },
];

// Pre-built scenarios
export interface CalculatorScenario {
    id: string;
    name: string;
    startingPortfolio: number;
    monthlyContribution: number;
    expectedReturn: number;
    years: number;
    tradesPerYear: number;
    investmentType: InvestmentType;
    internationalTrading: boolean;
    accountTypes: AccountType[];
    description: string;
}

export const CALCULATOR_SCENARIOS: CalculatorScenario[] = [
    {
        id: 'young-starter',
        name: 'Young Starter',
        startingPortfolio: 5000,
        monthlyContribution: 200,
        expectedReturn: 7,
        years: 30,
        tradesPerYear: 12,
        investmentType: 'etfs',
        internationalTrading: false,
        accountTypes: ['isa'],
        description: 'First-time investors in their 20s-30s',
    },
    {
        id: 'monthly-saver',
        name: 'Monthly Saver',
        startingPortfolio: 15000,
        monthlyContribution: 500,
        expectedReturn: 7,
        years: 25,
        tradesPerYear: 12,
        investmentType: 'mixed',
        internationalTrading: false,
        accountTypes: ['isa'],
        description: 'Regular savers building wealth',
    },
    {
        id: 'mid-career',
        name: 'Mid-Career Builder',
        startingPortfolio: 75000,
        monthlyContribution: 1000,
        expectedReturn: 7,
        years: 20,
        tradesPerYear: 12,
        investmentType: 'mixed',
        internationalTrading: true,
        accountTypes: ['isa', 'trading'],
        description: 'Established professionals',
    },
    {
        id: 'high-earner',
        name: 'High Earner',
        startingPortfolio: 150000,
        monthlyContribution: 2000,
        expectedReturn: 7,
        years: 15,
        tradesPerYear: 24,
        investmentType: 'mixed',
        internationalTrading: true,
        accountTypes: ['isa', 'sipp'],
        description: 'High income maximizing tax wrappers',
    },
    {
        id: 'pre-retiree',
        name: 'Pre-Retiree',
        startingPortfolio: 300000,
        monthlyContribution: 0,
        expectedReturn: 5,
        years: 10,
        tradesPerYear: 12,
        investmentType: 'mixed',
        internationalTrading: false,
        accountTypes: ['sipp'],
        description: 'Final accumulation phase',
    },
    {
        id: 'drawdown',
        name: 'Drawdown Starter',
        startingPortfolio: 400000,
        monthlyContribution: 0,
        expectedReturn: 5,
        years: 20,
        tradesPerYear: 6,
        investmentType: 'etfs',
        internationalTrading: false,
        accountTypes: ['sipp'],
        description: 'Just entered drawdown',
    },
];
